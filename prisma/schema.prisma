generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}


model User {
  id        String      @id @default(cuid())
  username  String?     
  email     String?
  password  String? 
  highScores HighScore[]
  gameStatistics GameStatistic[]
}

// Define the Games table
model Game {
  id    Int     @id @default(autoincrement())
  mode  String
  highScores HighScore[]
  gameStatistics GameStatistic[]
}

// Define the HighScores table
model HighScore {
  id            String       @id @default(cuid())
  score         Int
  completionTime Int
  turnsTaken    Int
  user          User      @relation(fields: [userId], references: [id])
  userId        String
  game          Game      @relation(fields: [gameId], references: [id])
  gameId        Int
}

// Define the GameStatistics table
model GameStatistic {
  id                   Int      @id @default(autoincrement())
  turnsTaken           Int
  timePerTurn          Float[]
  accuracyRate         Float
  cardFlips            Int
  gameCompletionStatus Boolean
  scoreDistribution    Json    // Assuming score distribution is stored as JSON
  datePlayed           DateTime
  user                 User     @relation(fields: [userId], references: [id])
  userId               String
  game                 Game     @relation(fields: [gameId], references: [id])
  gameId               Int
}
